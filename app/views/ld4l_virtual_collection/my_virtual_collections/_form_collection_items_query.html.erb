<%= form_tag( {controller: form_controller, action: form_action, collection_id: @collection.id}, method: form_method, id: form_id, class: form_class ) do %>

    <div id="fci_loading_spinner" class="loading">
      <div class="loading-overlay">
        <p class="loading-spinner">
        </p>
      </div>
    </div>

    <%= hidden_field( :collection, :id ) %>
    <%= hidden_field( :item, :id ) %>

    <div class="field">
      <%= label_tag("items_query", "Cornell Solr Query") %>
      <%= text_field "items", "query", "size" => 80, "value" => @solr_query %>
    </div>

    <div class="modal-footer">
      <button id="close-btn" class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
      <button id="submit-btn" class="btn btn-primary" type="submit">Save changes</button>
    </div>
<% end %>

<script>
    $('#close-btn').on('click', function() {
        document.getElementById("fci_loading_spinner").style.visibility = "visible";
        $("#<%= modal_id %>").addClass("vc-disable-modal");
        $("#close-btn").prop("disabled",true);
        $("#submit-btn").prop('disabled',true);
    });
    $('#submit-btn').on('click', function() {
        document.getElementById("fci_loading_spinner").style.visibility = "visible";
        $("#<%= modal_id %>").addClass("vc-disable-modal");
        $("#close-btn").prop("disabled",true);
        $("#submit-btn").prop('disabled',true);
    });
</script>